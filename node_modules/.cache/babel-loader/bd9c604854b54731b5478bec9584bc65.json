{"remainingRequest":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/babel-loader/lib/index.js!/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/boduoduo/Desktop/学习/myVueLearn/src/views/Player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/src/views/Player.vue","mtime":1585481310944},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2JvZHVvZHVvL0Rlc2t0b3AvXHU1QjY2XHU0RTYwL215VnVlTGVhcm4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTm9ybWFsUGxheWVyIGZyb20gIi4uL2NvbXBvbmVudHMvcGxheWVyL05vcm1hbFBsYXllciI7CmltcG9ydCBNaW5pUGxheWVyIGZyb20gJy4uL2NvbXBvbmVudHMvcGxheWVyL01pbmlQbGF5ZXInOwppbXBvcnQgTGlzdFBsYXllciBmcm9tICcuLi9jb21wb25lbnRzL3BsYXllci9MaXN0UGxheWVyJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgbW9kZSBmcm9tICcuLi9zdG9yZS9tb2RlVHlwZSc7CmltcG9ydCB7IGdldFJhbmRvbUludEluY2x1c2l2ZSB9IGZyb20gJy4uL3Rvb2xzL3Rvb2wnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBsYXllciIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvdGFsVGltZTogMCwKICAgICAgY3VycmVudFRpbWU6IDAKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBOb3JtYWxQbGF5ZXI6IE5vcm1hbFBsYXllciwKICAgIE1pbmlQbGF5ZXI6IE1pbmlQbGF5ZXIsCiAgICBMaXN0UGxheWVyOiBMaXN0UGxheWVyCiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnc2V0Q3VycmVudEluZGV4J10pLCB7CiAgICB0aW1ldXBkYXRlOiBmdW5jdGlvbiB0aW1ldXBkYXRlKGUpIHsKICAgICAgdGhpcy5jdXJyZW50VGltZSA9IGUudGFyZ2V0LmN1cnJlbnRUaW1lOwogICAgfSwKICAgIHBsYXllbmQ6IGZ1bmN0aW9uIHBsYXllbmQoKSB7CiAgICAgIGlmICh0aGlzLm1vZGVUeXBlID09PSBtb2RlLmxvb3ApIHsKICAgICAgICB0aGlzLnNldEN1cnJlbnRJbmRleCh0aGlzLmN1cnJlbnRJbmRleCArIDEpOwogICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZVR5cGUgPT09IG1vZGUub25lKSB7CiAgICAgICAgdGhpcy4kcmVmcy5hdWRpby5wbGF5KCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlVHlwZSA9PT0gbW9kZS5yYW5kb20pIHsKICAgICAgICB2YXIgaW5kZXggPSBnZXRSYW5kb21JbnRJbmNsdXNpdmUoMCwgdGhpcy5zb25ncy5sZW5ndGggLSAxKTsKICAgICAgICB0aGlzLnNldEN1cnJlbnRJbmRleChpbmRleCk7CiAgICAgIH0KICAgIH0KICB9KSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2N1cnJlbnRTb25nJywgJ2lzUGxheWluZycsICdjdXJyZW50SW5kZXgnLCAnY3VycmVudFBsYXlUaW1lJywgJ21vZGVUeXBlJywgJ3NvbmdzJ10pKSwKICB3YXRjaDogewogICAgaXNQbGF5aW5nOiBmdW5jdGlvbiBpc1BsYXlpbmcobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGlmIChuZXdWYWx1ZSkgewogICAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGxheSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGF1c2UoKTsKICAgICAgfQogICAgfSwKICAgIGN1cnJlbnRJbmRleDogZnVuY3Rpb24gY3VycmVudEluZGV4KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5hdWRpby5vbmNhbnBsYXkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMudG90YWxUaW1lID0gX3RoaXMuJHJlZnMuYXVkaW8uZHVyYXRpb247CgogICAgICAgIGlmIChfdGhpcy5pc1BsYXlpbmcpIHsKICAgICAgICAgIF90aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJHJlZnMuYXVkaW8ucGF1c2UoKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgY3VycmVudFBsYXlUaW1lOiBmdW5jdGlvbiBjdXJyZW50UGxheVRpbWUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMuJHJlZnMuYXVkaW8uY3VycmVudFRpbWUgPSBuZXdWYWx1ZTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB0aGlzLiRyZWZzLmF1ZGlvLm9uY2FucGxheSA9IGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMyLnRvdGFsVGltZSA9IF90aGlzMi4kcmVmcy5hdWRpby5kdXJhdGlvbjsKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["Player.vue"],"names":[],"mappings":";;;;;;;;;;AAUA,OAAA,YAAA,MAAA,mCAAA;AACA,OAAA,UAAA,MAAA,iCAAA;AACA,OAAA,UAAA,MAAA,iCAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AACA,SAAA,qBAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,CADA;AAEA,MAAA,WAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA,YADA;AAEA,IAAA,UAAA,EAAA,UAFA;AAGA,IAAA,UAAA,EAAA;AAHA,GARA;AAaA,EAAA,OAAA,oBACA,UAAA,CAAA,CACA,iBADA,CAAA,CADA;AAKA,IAAA,UALA,sBAKA,CALA,EAKA;AACA,WAAA,WAAA,GAAA,CAAA,CAAA,MAAA,CAAA,WAAA;AACA,KAPA;AASA,IAAA,OATA,qBASA;AACA,UAAA,KAAA,QAAA,KAAA,IAAA,CAAA,IAAA,EAAA;AACA,aAAA,eAAA,CAAA,KAAA,YAAA,GAAA,CAAA;AACA,OAFA,MAEA,IAAA,KAAA,QAAA,KAAA,IAAA,CAAA,GAAA,EAAA;AACA,aAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA,OAFA,MAEA,IAAA,KAAA,QAAA,KAAA,IAAA,CAAA,MAAA,EAAA;AACA,YAAA,KAAA,GAAA,qBAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,aAAA,eAAA,CAAA,KAAA;AACA;AACA;AAlBA,IAbA;AAiCA,EAAA,QAAA,oBACA,UAAA,CAAA,CACA,aADA,EAEA,WAFA,EAGA,cAHA,EAIA,iBAJA,EAKA,UALA,EAMA,OANA,CAAA,CADA,CAjCA;AA4CA,EAAA,KAAA,EAAA;AACA,IAAA,SADA,qBACA,QADA,EACA,QADA,EACA;AACA,UAAA,QAAA,EAAA;AACA,aAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CAAA,KAAA,CAAA,KAAA;AACA;AACA,KAPA;AASA,IAAA,YATA,wBASA,QATA,EASA,QATA,EASA;AAAA;;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,SAAA,GAAA,YAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,QAAA;;AACA,YAAA,KAAA,CAAA,SAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,KAAA;AACA;AACA,OAPA;AAQA,KAlBA;AAoBA,IAAA,eApBA,2BAoBA,QApBA,EAoBA,QApBA,EAoBA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,WAAA,GAAA,QAAA;AACA;AAtBA,GA5CA;AAqEA,EAAA,OArEA,qBAqEA;AAAA;;AACA,SAAA,KAAA,CAAA,KAAA,CAAA,SAAA,GAAA,YAAA;AACA,MAAA,MAAA,CAAA,SAAA,GAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,QAAA;AACA,KAFA;AAGA;AAzEA,CAAA","sourcesContent":["<template>\n  <div class=\"player\">\n    <NormalPlayer :totalTime=\"totalTime\" :currentTime=\"currentTime\"></NormalPlayer>\n    <MiniPlayer></MiniPlayer>\n    <ListPlayer ref=\"listPlayer\"></ListPlayer>\n    <audio :src=\"currentSong.url\" ref=\"audio\" @timeupdate=\"timeupdate\" @ended=\"playend\"></audio>\n  </div>\n</template>\n\n<script>\nimport NormalPlayer from \"../components/player/NormalPlayer\"\nimport MiniPlayer from '../components/player/MiniPlayer'\nimport ListPlayer from '../components/player/ListPlayer'\nimport { mapGetters, mapActions } from 'vuex'\nimport mode from '../store/modeType'\nimport { getRandomIntInclusive } from '../tools/tool'\n\nexport default {\n  name: \"Player\",\n  data() {\n    return {\n      totalTime: 0,\n      currentTime: 0\n    }\n  },\n  components: {\n    NormalPlayer,\n    MiniPlayer,\n    ListPlayer\n  },\n  methods: {\n    ...mapActions([\n      'setCurrentIndex'\n    ]),\n\n    timeupdate (e) {\n      this.currentTime = e.target.currentTime\n    },\n\n    playend () {\n      if (this.modeType === mode.loop) {\n        this.setCurrentIndex(this.currentIndex + 1)\n      }else if (this.modeType === mode.one) {\n        this.$refs.audio.play()\n      }else if (this.modeType === mode.random) {\n        let index = getRandomIntInclusive(0, this.songs.length - 1)\n        this.setCurrentIndex(index)\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'currentSong',\n      'isPlaying',\n      'currentIndex',\n      'currentPlayTime',\n      'modeType',\n      'songs'\n    ])\n  },\n\n  watch: {\n    isPlaying(newValue, oldValue) {\n      if (newValue) {\n        this.$refs.audio.play()\n      }else {\n        this.$refs.audio.pause()\n      }\n    },\n\n    currentIndex(newValue, oldValue) {\n      this.$refs.audio.oncanplay = () => {\n        this.totalTime = this.$refs.audio.duration\n        if (this.isPlaying) {\n          this.$refs.audio.play()\n        }else {\n          this.$refs.audio.pause()\n        }\n      }\n    },\n\n    currentPlayTime (newValue, oldValue) {\n      this.$refs.audio.currentTime = newValue\n    }\n  },\n\n  mounted() {\n    this.$refs.audio.oncanplay = () => {\n      this.totalTime = this.$refs.audio.duration\n    }\n  },\n\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"sourceRoot":"src/views"}]}