{"remainingRequest":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/src/views/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/src/views/Search.vue","mtime":1586259476968},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":1584931130054},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/babel-loader/lib/index.js","mtime":1584931129970},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":1584931130054},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/index.js","mtime":1584931133236}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTY3JvbGxWaWV3IGZyb20gIi4uL2NvbXBvbmVudHMvU2Nyb2xsVmlldyI7CmltcG9ydCB7IGdldFNlYXJjaExpc3QgfSBmcm9tICIuLi9hcGkvaW5kZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTZWFyY2giLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBrZXl3b3JkczogIiIsCiAgICAgIHNvbmdzOiBbXQogICAgfTsKICB9LAoKICBjb21wb25lbnRzOiB7CiAgICBTY3JvbGxWaWV3CiAgfSwKCiAgbWV0aG9kczogewogICAgc2VhcmNoKCkgewogICAgICBpZiAodGhpcy5rZXl3b3JkcyA9PT0gIiIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZ2V0U2VhcmNoTGlzdCh7ICdrZXl3b3Jkcyc6IHRoaXMua2V5d29yZHMgfSkKICAgICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICAgIHRoaXMuc29uZ3MgPSBkYXRhLnJlc3VsdC5zb25nczsKICAgICAgICB9KQogICAgICAgIC50aGVuKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgfQogIH0sCgogIC8vIOiHquWumuS5ieaMh+S7pAogIGRpcmVjdGl2ZXM6IHsKICAgIHRocm90dGxlOiB7CiAgICAgIGluc2VydGVkOiBmdW5jdGlvbihlbCwgb2JqKSB7CiAgICAgICAgbGV0IHRpbWVySWQgPSBudWxsOwogICAgICAgIGxldCBmbGFnID0gdHJ1ZTsKICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKCFmbGFnKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgICAgIHRpbWVySWQgJiYgY2xlYXJUaW1lb3V0KHRpbWVySWQpOwogICAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgb2JqLnZhbHVlKCk7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"search\">\n    <div class=\"search-box\">\n      <img\n        src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNiAyNiI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjYzljOWNhIiBkPSJNMjUuMTgxIDIzLjUzNWwtMS40MTQgMS40MTQtNy4zMTUtNy4zMTRBOS45NjYgOS45NjYgMCAwIDEgMTAgMjBDNC40NzcgMjAgMCAxNS41MjMgMCAxMFM0LjQ3NyAwIDEwIDBzMTAgNC40NzcgMTAgMTBjMCAyLjM0Mi0uODExIDQuNDktMi4xNiA2LjE5NWw3LjM0MSA3LjM0ek0xMCAyYTggOCAwIDEgMCAwIDE2IDggOCAwIDAgMCAwLTE2eiIvPjwvc3ZnPg==\"\n        alt=\"\"\n      />\n      <input\n        type=\"text\"\n        placeholder=\"搜索歌曲、歌手、专辑\"\n        v-model=\"keywords\"\n        v-throttle=\"search\"\n      />\n    </div>\n    <div class=\"search-suggest\" v-show=\"keywords !== ''\">\n      <ScrollView>\n        <ul>\n          <li v-for=\"value in songs\" :key=\"value.id\">\n            <img\n              src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNiAyNiI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjYzljOWNhIiBkPSJNMjUuMTgxIDIzLjUzNWwtMS40MTQgMS40MTQtNy4zMTUtNy4zMTRBOS45NjYgOS45NjYgMCAwIDEgMTAgMjBDNC40NzcgMjAgMCAxNS41MjMgMCAxMFM0LjQ3NyAwIDEwIDBzMTAgNC40NzcgMTAgMTBjMCAyLjM0Mi0uODExIDQuNDktMi4xNiA2LjE5NWw3LjM0MSA3LjM0ek0xMCAyYTggOCAwIDEgMCAwIDE2IDggOCAwIDAgMCAwLTE2eiIvPjwvc3ZnPg==\"\n              alt=\"\"\n            />\n            <p>{{ value.name }} - {{ value.artist[0].name }}</p>\n          </li>\n        </ul>\n      </ScrollView>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ScrollView from \"../components/ScrollView\";\nimport { getSearchList } from \"../api/index\";\n\nexport default {\n  name: \"Search\",\n  data() {\n    return {\n      keywords: \"\",\n      songs: []\n    };\n  },\n\n  components: {\n    ScrollView\n  },\n\n  methods: {\n    search() {\n      if (this.keywords === \"\") {\n        return;\n      }\n      getSearchList({ 'keywords': this.keywords })\n        .then(data => {\n          this.songs = data.result.songs;\n        })\n        .then(err => {\n          console.log(err);\n        });\n    }\n  },\n\n  // 自定义指令\n  directives: {\n    throttle: {\n      inserted: function(el, obj) {\n        let timerId = null;\n        let flag = true;\n        el.addEventListener(\"input\", function() {\n          if (!flag) {\n            return;\n          }\n          flag = false;\n          timerId && clearTimeout(timerId);\n          timerId = setTimeout(() => {\n            flag = true;\n            obj.value();\n          }, 1000);\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/css/mixin\";\n@import \"../assets/css/variable\";\n.search {\n  position: fixed;\n  left: 0;\n  top: 184px;\n  bottom: 0;\n  right: 0;\n  @include bg_sub_color();\n  .search-box {\n    display: flex;\n    align-items: center;\n    margin: 40px 20px;\n    background-color: #ebecec;\n    border-radius: 30px;\n    img {\n      width: 40px;\n      height: 40px;\n      margin-left: 20px;\n    }\n    input {\n      border: none;\n      outline: none;\n      background: transparent;\n      @include font_size($font_medium);\n      height: 60px;\n      margin-left: 20px;\n    }\n  }\n  .search-suggest {\n    position: fixed;\n    left: 0;\n    top: 300px;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    li {\n      display: flex;\n      align-items: center;\n      padding: 20px;\n      box-sizing: border-box;\n      border-bottom: 1px solid #ccc;\n      img {\n        width: 40px;\n        height: 40px;\n      }\n      p {\n        margin-left: 20px;\n        @include font_color();\n        @include font_size($font_medium);\n      }\n    }\n  }\n}\n</style>\n"]}]}