{"remainingRequest":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/boduoduo/Desktop/学习/myVueLearn/src/views/Player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/src/views/Player.vue","mtime":1585481310944},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/boduoduo/Desktop/学习/myVueLearn/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOb3JtYWxQbGF5ZXIgZnJvbSAiLi4vY29tcG9uZW50cy9wbGF5ZXIvTm9ybWFsUGxheWVyIgppbXBvcnQgTWluaVBsYXllciBmcm9tICcuLi9jb21wb25lbnRzL3BsYXllci9NaW5pUGxheWVyJwppbXBvcnQgTGlzdFBsYXllciBmcm9tICcuLi9jb21wb25lbnRzL3BsYXllci9MaXN0UGxheWVyJwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IG1vZGUgZnJvbSAnLi4vc3RvcmUvbW9kZVR5cGUnCmltcG9ydCB7IGdldFJhbmRvbUludEluY2x1c2l2ZSB9IGZyb20gJy4uL3Rvb2xzL3Rvb2wnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBsYXllciIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvdGFsVGltZTogMCwKICAgICAgY3VycmVudFRpbWU6IDAKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE5vcm1hbFBsYXllciwKICAgIE1pbmlQbGF5ZXIsCiAgICBMaXN0UGxheWVyCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsKICAgICAgJ3NldEN1cnJlbnRJbmRleCcKICAgIF0pLAoKICAgIHRpbWV1cGRhdGUgKGUpIHsKICAgICAgdGhpcy5jdXJyZW50VGltZSA9IGUudGFyZ2V0LmN1cnJlbnRUaW1lCiAgICB9LAoKICAgIHBsYXllbmQgKCkgewogICAgICBpZiAodGhpcy5tb2RlVHlwZSA9PT0gbW9kZS5sb29wKSB7CiAgICAgICAgdGhpcy5zZXRDdXJyZW50SW5kZXgodGhpcy5jdXJyZW50SW5kZXggKyAxKQogICAgICB9ZWxzZSBpZiAodGhpcy5tb2RlVHlwZSA9PT0gbW9kZS5vbmUpIHsKICAgICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKQogICAgICB9ZWxzZSBpZiAodGhpcy5tb2RlVHlwZSA9PT0gbW9kZS5yYW5kb20pIHsKICAgICAgICBsZXQgaW5kZXggPSBnZXRSYW5kb21JbnRJbmNsdXNpdmUoMCwgdGhpcy5zb25ncy5sZW5ndGggLSAxKQogICAgICAgIHRoaXMuc2V0Q3VycmVudEluZGV4KGluZGV4KQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICdjdXJyZW50U29uZycsCiAgICAgICdpc1BsYXlpbmcnLAogICAgICAnY3VycmVudEluZGV4JywKICAgICAgJ2N1cnJlbnRQbGF5VGltZScsCiAgICAgICdtb2RlVHlwZScsCiAgICAgICdzb25ncycKICAgIF0pCiAgfSwKCiAgd2F0Y2g6IHsKICAgIGlzUGxheWluZyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgdGhpcy4kcmVmcy5hdWRpby5wbGF5KCkKICAgICAgfWVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGF1c2UoKQogICAgICB9CiAgICB9LAoKICAgIGN1cnJlbnRJbmRleChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy4kcmVmcy5hdWRpby5vbmNhbnBsYXkgPSAoKSA9PiB7CiAgICAgICAgdGhpcy50b3RhbFRpbWUgPSB0aGlzLiRyZWZzLmF1ZGlvLmR1cmF0aW9uCiAgICAgICAgaWYgKHRoaXMuaXNQbGF5aW5nKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKQogICAgICAgIH1lbHNlIHsKICAgICAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGF1c2UoKQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBjdXJyZW50UGxheVRpbWUgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLiRyZWZzLmF1ZGlvLmN1cnJlbnRUaW1lID0gbmV3VmFsdWUKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kcmVmcy5hdWRpby5vbmNhbnBsYXkgPSAoKSA9PiB7CiAgICAgIHRoaXMudG90YWxUaW1lID0gdGhpcy4kcmVmcy5hdWRpby5kdXJhdGlvbgogICAgfQogIH0sCgp9Owo="},{"version":3,"sources":["Player.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"Player.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"player\">\n    <NormalPlayer :totalTime=\"totalTime\" :currentTime=\"currentTime\"></NormalPlayer>\n    <MiniPlayer></MiniPlayer>\n    <ListPlayer ref=\"listPlayer\"></ListPlayer>\n    <audio :src=\"currentSong.url\" ref=\"audio\" @timeupdate=\"timeupdate\" @ended=\"playend\"></audio>\n  </div>\n</template>\n\n<script>\nimport NormalPlayer from \"../components/player/NormalPlayer\"\nimport MiniPlayer from '../components/player/MiniPlayer'\nimport ListPlayer from '../components/player/ListPlayer'\nimport { mapGetters, mapActions } from 'vuex'\nimport mode from '../store/modeType'\nimport { getRandomIntInclusive } from '../tools/tool'\n\nexport default {\n  name: \"Player\",\n  data() {\n    return {\n      totalTime: 0,\n      currentTime: 0\n    }\n  },\n  components: {\n    NormalPlayer,\n    MiniPlayer,\n    ListPlayer\n  },\n  methods: {\n    ...mapActions([\n      'setCurrentIndex'\n    ]),\n\n    timeupdate (e) {\n      this.currentTime = e.target.currentTime\n    },\n\n    playend () {\n      if (this.modeType === mode.loop) {\n        this.setCurrentIndex(this.currentIndex + 1)\n      }else if (this.modeType === mode.one) {\n        this.$refs.audio.play()\n      }else if (this.modeType === mode.random) {\n        let index = getRandomIntInclusive(0, this.songs.length - 1)\n        this.setCurrentIndex(index)\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'currentSong',\n      'isPlaying',\n      'currentIndex',\n      'currentPlayTime',\n      'modeType',\n      'songs'\n    ])\n  },\n\n  watch: {\n    isPlaying(newValue, oldValue) {\n      if (newValue) {\n        this.$refs.audio.play()\n      }else {\n        this.$refs.audio.pause()\n      }\n    },\n\n    currentIndex(newValue, oldValue) {\n      this.$refs.audio.oncanplay = () => {\n        this.totalTime = this.$refs.audio.duration\n        if (this.isPlaying) {\n          this.$refs.audio.play()\n        }else {\n          this.$refs.audio.pause()\n        }\n      }\n    },\n\n    currentPlayTime (newValue, oldValue) {\n      this.$refs.audio.currentTime = newValue\n    }\n  },\n\n  mounted() {\n    this.$refs.audio.oncanplay = () => {\n      this.totalTime = this.$refs.audio.duration\n    }\n  },\n\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}