{"remainingRequest":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/src/views/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/src/views/Detail.vue","mtime":1585550542365},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":1584931130054},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/babel-loader/lib/index.js","mtime":1584931129970},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":1584931130054},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/index.js","mtime":1584931133236}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTdWJIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9kZXRhaWwvU3ViSGVhZGVyIjsKaW1wb3J0IERldGFpbFRvcCBmcm9tICIuLi9jb21wb25lbnRzL2RldGFpbC9EZXRhaWxUb3AiOwppbXBvcnQgRGV0YWlsQm90dG9tIGZyb20gIi4uL2NvbXBvbmVudHMvZGV0YWlsL0RldGFpbEJvdHRvbSI7CmltcG9ydCBTY3JvbGxWaWV3IGZyb20gIi4uL2NvbXBvbmVudHMvU2Nyb2xsVmlldyI7CmltcG9ydCB7IGdldFBsYXlMaXN0LCBnZXRBbGJ1bURldGFpbCB9IGZyb20gIi4uL2FwaS9pbmRleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRldGFpbCIsCiAgY29tcG9uZW50czogewogICAgU3ViSGVhZGVyLAogICAgRGV0YWlsVG9wLAogICAgRGV0YWlsQm90dG9tLAogICAgU2Nyb2xsVmlldwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYXlsaXN0OiB7fQogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy50eXBlID09PSAicGVyc29uYWxpemVkIikgewogICAgICAvLyDojrflj5bmrYzljZXor6bmg4UKICAgICAgZ2V0UGxheUxpc3QoeyBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkIH0pCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLnBsYXlsaXN0ID0gZGF0YS5wbGF5bGlzdDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CgogICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMudHlwZSA9PT0gImFsYnVtIikgewogICAgICAvLyDojrflj5bkuJPovpHor6bmg4UKICAgICAgZ2V0QWxidW1EZXRhaWwoeyBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkIH0pCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLnBsYXlsaXN0ID0gewogICAgICAgICAgICBuYW1lOiBkYXRhLmFsYnVtLm5hbWUsCiAgICAgICAgICAgIGNvdmVySW1nVXJsOiBkYXRhLmFsYnVtLnBpY1VybCwKICAgICAgICAgICAgdHJhY2tzOiBkYXRhLnNvbmdzCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBsZXQgZGVmYXVsdEhlaWdodCA9IHRoaXMuJHJlZnMuaGVhZGVySW1nLiRlbC5vZmZzZXRIZWlnaHQ7CiAgICB0aGlzLiRyZWZzLnNjcm9sbHZpZXcuc2Nyb2xsaW5nKG9mZnNldFkgPT4gewogICAgICBpZiAob2Zmc2V0WSA8IDApIHsKICAgICAgICBsZXQgb3BhY2l0eSA9ICBNYXRoLmFicyhvZmZzZXRZKSAvIGRlZmF1bHRIZWlnaHQ7CiAgICAgICAgLy8g6auY5pav5qih57OK5Zyo56e75Yqo56uv6Z2e5bi45raI6ICX5oCn6IO977yM5LiN5bu66K6u5Zyo56e75Yqo56uv5L2/55SoCiAgICAgICAgLy8gdGhpcy4kcmVmcy5oZWFkZXJJbWcuJGVsLnN0eWxlLmZpbHRlciA9IGBibHVyKCR7Ymx1cn1weClgOwogICAgICAgIHRoaXMuJHJlZnMuaGVhZGVySW1nLmNoYW5nZU1hc2tBbHBoYShvcGFjaXR5KQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBzY2FsZSA9IDEgKyBvZmZzZXRZIC8gZGVmYXVsdEhlaWdodDsKICAgICAgICB0aGlzLiRyZWZzLmhlYWRlckltZy4kZWwuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlKCR7c2NhbGV9KWA7CiAgICAgIH0KICAgIH0pOwogIH0KfTsK"},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"detail\">\n    <SubHeader :title=\"playlist.name\"></SubHeader>\n    <DetailTop :path=\"playlist.coverImgUrl\" ref=\"headerImg\"></DetailTop>\n    <div class=\"bottom\">\n      <ScrollView ref=\"scrollview\">\n        <DetailBottom :playlist=\"playlist.tracks\"></DetailBottom>\n      </ScrollView>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SubHeader from \"../components/detail/SubHeader\";\nimport DetailTop from \"../components/detail/DetailTop\";\nimport DetailBottom from \"../components/detail/DetailBottom\";\nimport ScrollView from \"../components/ScrollView\";\nimport { getPlayList, getAlbumDetail } from \"../api/index\";\n\nexport default {\n  name: \"Detail\",\n  components: {\n    SubHeader,\n    DetailTop,\n    DetailBottom,\n    ScrollView\n  },\n  data() {\n    return {\n      playlist: {}\n    };\n  },\n\n  created() {\n    if (this.$route.params.type === \"personalized\") {\n      // 获取歌单详情\n      getPlayList({ id: this.$route.params.id })\n        .then(data => {\n          this.playlist = data.playlist;\n        })\n        .catch(error => {\n          console.log(error);\n        });\n\n    } else if (this.$route.params.type === \"album\") {\n      // 获取专辑详情\n      getAlbumDetail({ id: this.$route.params.id })\n        .then(data => {\n          this.playlist = {\n            name: data.album.name,\n            coverImgUrl: data.album.picUrl,\n            tracks: data.songs\n          }\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    }\n  },\n\n  mounted() {\n    let defaultHeight = this.$refs.headerImg.$el.offsetHeight;\n    this.$refs.scrollview.scrolling(offsetY => {\n      if (offsetY < 0) {\n        let opacity =  Math.abs(offsetY) / defaultHeight;\n        // 高斯模糊在移动端非常消耗性能，不建议在移动端使用\n        // this.$refs.headerImg.$el.style.filter = `blur(${blur}px)`;\n        this.$refs.headerImg.changeMaskAlpha(opacity)\n      } else {\n        let scale = 1 + offsetY / defaultHeight;\n        this.$refs.headerImg.$el.style.transform = `scale(${scale})`;\n      }\n    });\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../assets/css/mixin\";\n\n.detail {\n  @include bg_sub_color();\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  .bottom {\n    position: fixed;\n    top: 500px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n}\n</style>\n"]}]}