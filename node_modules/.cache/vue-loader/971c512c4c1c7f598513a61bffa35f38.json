{"remainingRequest":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/src/views/Search.vue?vue&type=style&index=0&id=1a1d373c&lang=scss&scoped=true&","dependencies":[{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/src/views/Search.vue","mtime":1587367340097},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/css-loader/dist/cjs.js","mtime":1584931130604},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1584931133236},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/postcss-loader/src/index.js","mtime":1584931132284},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/sass-loader/dist/cjs.js","mtime":1584931132739},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/cache-loader/dist/cjs.js","mtime":1584931130054},{"path":"/Users/Maxb/Desktop/HTML5/Vue学习/day-004/myVueLearn/node_modules/vue-loader/lib/index.js","mtime":1584931133236}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uL2Fzc2V0cy9jc3MvbWl4aW4iOwpAaW1wb3J0ICIuLi9hc3NldHMvY3NzL3ZhcmlhYmxlIjsKLnNlYXJjaCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDA7CiAgdG9wOiAxODRweDsKICBib3R0b206IDA7CiAgcmlnaHQ6IDA7CiAgQGluY2x1ZGUgYmdfc3ViX2NvbG9yKCk7CiAgLnNlYXJjaC1ib3ggewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBtYXJnaW46IDQwcHggMjBweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlYmVjZWM7CiAgICBib3JkZXItcmFkaXVzOiAzMHB4OwogICAgaW1nIHsKICAgICAgd2lkdGg6IDQwcHg7CiAgICAgIGhlaWdodDogNDBweDsKICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgICB9CiAgICBpbnB1dCB7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIEBpbmNsdWRlIGZvbnRfc2l6ZSgkZm9udF9tZWRpdW0pOwogICAgICBoZWlnaHQ6IDYwcHg7CiAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4OwogICAgfQogIH0KICAuc2VhcmNoLXN1Z2dlc3QgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgbGVmdDogMDsKICAgIHRvcDogMzAwcHg7CiAgICByaWdodDogMDsKICAgIGJvdHRvbTogMDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBAaW5jbHVkZSBiZ19zdWJfY29sb3IoKTsKICAgIGxpIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7CiAgICAgIGltZyB7CiAgICAgICAgd2lkdGg6IDQwcHg7CiAgICAgICAgaGVpZ2h0OiA0MHB4OwogICAgICB9CiAgICAgIHAgewogICAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4OwogICAgICAgIEBpbmNsdWRlIGZvbnRfY29sb3IoKTsKICAgICAgICBAaW5jbHVkZSBmb250X3NpemUoJGZvbnRfbWVkaXVtKTsKICAgICAgfQogICAgfQogIH0KICAuc2VhcmNoLWhvdCB7CiAgICBoMyB7CiAgICAgIEBpbmNsdWRlIGZvbnRfc2l6ZSgkZm9udF9tZWRpdW0pOwogICAgICBAaW5jbHVkZSBmb250X2NvbG9yKCk7CiAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsKICAgIH0KICAgIHVsIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC13cmFwOiB3cmFwOwogICAgICBsaSB7CiAgICAgICAgaGVpZ2h0OiA2MHB4OwogICAgICAgIGxpbmUtaGVpZ2h0OiA2MHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7CiAgICAgICAgYm9yZGVyLXJhZGl1czogMzBweDsKICAgICAgICBwYWRkaW5nOiAwIDIwcHg7CiAgICAgICAgQGluY2x1ZGUgZm9udF9jb2xvcigpOwogICAgICAgIEBpbmNsdWRlIGZvbnRfc2l6ZSgkZm9udF9tZWRpdW1fcyk7CiAgICAgICAgbWFyZ2luOiAxMHB4IDIwcHg7CiAgICAgIH0KICAgIH0KICB9CiAgLnNlYXJjaC1oaXN0b3J5IHsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICBsaSB7CiAgICAgIHBhZGRpbmc6IDIwcHggMjBweDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYzsKICAgICAgLmhpc3RvcnktbGVmdCB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIGltZyB7CiAgICAgICAgICB3aWR0aDogNDBweDsKICAgICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICB9CiAgICAgICAgcCB7CiAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDsKICAgICAgICAgIEBpbmNsdWRlIGZvbnRfc2l6ZSgkZm9udF9tZWRpdW1fcyk7CiAgICAgICAgICBAaW5jbHVkZSBmb250X2NvbG9yKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC5oaXN0b3J5LXJpZ2h0IHsKICAgICAgICBpbWcgewogICAgICAgICAgd2lkdGg6IDMwcHg7CiAgICAgICAgICBoZWlnaHQ6IDMwcHg7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"search\">\n    <div class=\"search-box\">\n      <img\n        src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNiAyNiI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjYzljOWNhIiBkPSJNMjUuMTgxIDIzLjUzNWwtMS40MTQgMS40MTQtNy4zMTUtNy4zMTRBOS45NjYgOS45NjYgMCAwIDEgMTAgMjBDNC40NzcgMjAgMCAxNS41MjMgMCAxMFM0LjQ3NyAwIDEwIDBzMTAgNC40NzcgMTAgMTBjMCAyLjM0Mi0uODExIDQuNDktMi4xNiA2LjE5NWw3LjM0MSA3LjM0ek0xMCAyYTggOCAwIDEgMCAwIDE2IDggOCAwIDAgMCAwLTE2eiIvPjwvc3ZnPg==\"\n        alt=\"\"\n      />\n      <input\n        type=\"text\"\n        placeholder=\"搜索歌曲、歌手、专辑\"\n        v-model=\"keywords\"\n        v-throttle=\"search\"\n      />\n    </div>\n    <div class=\"search-suggest\" v-show=\"keywords !== ''\">\n      <ScrollView>\n        <ul>\n          <li v-for=\"value in songs\" :key=\"value.id\" @click.stop=\"selectMusic(value.id)\">\n            <img\n              src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNiAyNiI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjYzljOWNhIiBkPSJNMjUuMTgxIDIzLjUzNWwtMS40MTQgMS40MTQtNy4zMTUtNy4zMTRBOS45NjYgOS45NjYgMCAwIDEgMTAgMjBDNC40NzcgMjAgMCAxNS41MjMgMCAxMFM0LjQ3NyAwIDEwIDBzMTAgNC40NzcgMTAgMTBjMCAyLjM0Mi0uODExIDQuNDktMi4xNiA2LjE5NWw3LjM0MSA3LjM0ek0xMCAyYTggOCAwIDEgMCAwIDE2IDggOCAwIDAgMCAwLTE2eiIvPjwvc3ZnPg==\"\n              alt=\"\"\n            />\n            <p>{{ value.name }} - {{ value.artists[0].name }}</p>\n          </li>\n        </ul>\n      </ScrollView>\n    </div>\n    <div class=\"search-hot\">\n      <h3>热门搜索</h3>\n      <ul>\n        <li v-for=\"(value, index) in hots\" :key=\"index\" @click.stop=\"searchHotItem(value.first)\">{{ value.first }}</li>\n      </ul>\n    </div>\n    <div class=\"search-history\">\n      <ul>\n        <li v-for=\"(value) in searchHistory\" :key=\"value\">\n          <div class=\"history-left\">\n            <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMCAzMCI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjYzljYWNhIiBkPSJNMTUgMzBDNi43MTYgMzAgMCAyMy4yODQgMCAxNVM2LjcxNiAwIDE1IDBzMTUgNi43MTYgMTUgMTUtNi43MTYgMTUtMTUgMTVtMC0yOEM3LjgyIDIgMiA3LjgyIDIgMTVzNS44MiAxMyAxMyAxMyAxMy01LjgyIDEzLTEzUzIyLjE4IDIgMTUgMm03IDE2aC04YTEgMSAwIDAgMS0xLTFWN2ExIDEgMCAxIDEgMiAwdjloN2ExIDEgMCAxIDEgMCAyIi8+PC9zdmc+\" alt=\"\">\n            <p>{{ value }}</p>\n          </div>\n          <div class=\"history-right\">\n            <img @click=\"deleteHistorySong(value)\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjOTk5ODk5IiBkPSJNMTMuMzc5IDEybDEwLjMzOCAxMC4zMzdhLjk3NS45NzUgMCAxIDEtMS4zNzggMS4zNzlMMTIuMDAxIDEzLjM3OCAxLjY2MyAyMy43MTZhLjk3NC45NzQgMCAxIDEtMS4zNzgtMS4zNzlMMTAuNjIzIDEyIC4yODUgMS42NjJBLjk3NC45NzQgMCAxIDEgMS42NjMuMjg0bDEwLjMzOCAxMC4zMzhMMjIuMzM5LjI4NGEuOTc0Ljk3NCAwIDEgMSAxLjM3OCAxLjM3OEwxMy4zNzkgMTIiLz48L3N2Zz4=\" alt=\"\">\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ScrollView from \"../components/ScrollView\";\nimport { getSearchList, getSearchHot } from \"../api/index\";\nimport { mapActions } from 'vuex'\nimport { getLocalStorage, setLocalStorage } from \"../tools/tool\";\n\nexport default {\n  name: \"Search\",\n  data() {\n    return {\n      keywords: \"\",\n      songs: [],\n      hots: [],\n      searchHistory: []\n    };\n  },\n\n  components: {\n    ScrollView\n  },\n  created() {\n    getSearchHot()\n    .then((res) => {\n      this.hots = res.result.hots\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n    if (getLocalStorage('searchHistory') != undefined && getLocalStorage('searchHistory') != null) {\n      this.searchHistory = getLocalStorage('searchHistory')\n    }\n  },\n  methods: {\n    ...mapActions(['setFullScreen', 'setSongDetail']),\n    search() {\n      if (this.keywords === \"\") {\n        return;\n      }\n      getSearchList({ 'keywords': this.keywords })\n        .then(data => {\n          this.songs = data.result.songs;\n        })\n        .then(err => {\n          console.log(err);\n        });\n    },\n    selectMusic (id) {\n      this.setFullScreen(true)\n      this.setSongDetail([id])\n\n      if (this.searchHistory.includes(this.keywords)) {\n        return\n      }\n      this.searchHistory.push(this.keywords)\n      setLocalStorage('searchHistory', this.searchHistory)\n      this.keywords = ''\n    },\n    searchHotItem(value) {\n      this.keywords = value\n      this.search()\n    },\n    deleteHistorySong(name) {\n      this.searchHistory = this.searchHistory.filter((item) => {\n        return item != name\n      })\n      setLocalStorage('searchHistory', this.searchHistory)\n    }\n  },\n\n  // 自定义指令\n  directives: {\n    throttle: {\n      inserted: function(el, obj) {\n        let timerId = null;\n        let flag = true;\n        el.addEventListener(\"input\", function() {\n          if (!flag) {\n            return;\n          }\n          flag = false;\n          timerId && clearTimeout(timerId);\n          timerId = setTimeout(() => {\n            flag = true;\n            obj.value();\n          }, 1000);\n        });\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/css/mixin\";\n@import \"../assets/css/variable\";\n.search {\n  position: fixed;\n  left: 0;\n  top: 184px;\n  bottom: 0;\n  right: 0;\n  @include bg_sub_color();\n  .search-box {\n    display: flex;\n    align-items: center;\n    margin: 40px 20px;\n    background-color: #ebecec;\n    border-radius: 30px;\n    img {\n      width: 40px;\n      height: 40px;\n      margin-left: 20px;\n    }\n    input {\n      border: none;\n      outline: none;\n      background: transparent;\n      @include font_size($font_medium);\n      height: 60px;\n      margin-left: 20px;\n    }\n  }\n  .search-suggest {\n    position: fixed;\n    left: 0;\n    top: 300px;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    @include bg_sub_color();\n    li {\n      display: flex;\n      align-items: center;\n      padding: 20px;\n      box-sizing: border-box;\n      border-bottom: 1px solid #ccc;\n      img {\n        width: 40px;\n        height: 40px;\n      }\n      p {\n        margin-left: 20px;\n        @include font_color();\n        @include font_size($font_medium);\n      }\n    }\n  }\n  .search-hot {\n    h3 {\n      @include font_size($font_medium);\n      @include font_color();\n      padding: 10px 20px;\n    }\n    ul {\n      display: flex;\n      flex-wrap: wrap;\n      li {\n        height: 60px;\n        line-height: 60px;\n        border: 1px solid #000;\n        border-radius: 30px;\n        padding: 0 20px;\n        @include font_color();\n        @include font_size($font_medium_s);\n        margin: 10px 20px;\n      }\n    }\n  }\n  .search-history {\n    margin-top: 20px;\n    li {\n      padding: 20px 20px;\n      display: flex;\n      justify-content: space-between;\n      border-bottom: 1px solid #ccc;\n      .history-left {\n        display: flex;\n        align-items: center;\n        img {\n          width: 40px;\n          height: 40px;\n        }\n        p {\n          margin-left: 20px;\n          @include font_size($font_medium_s);\n          @include font_color();\n        }\n      }\n      .history-right {\n        img {\n          width: 30px;\n          height: 30px;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}